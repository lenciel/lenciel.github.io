<!DOCTYPE html> <!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--> <!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--> <!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]--> <head> <meta charset="utf-8"> <title>@Lenciel</title> <meta name="author" content="Lenciel"> <meta name="description" content=" How To Define Viewport For Mobile 2012-08-09 22:39:00 ..."> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="canonical" href="http://lenciel.com/posts/71/"> <link href="/favicon.png" rel="icon"> <script src="/assets/javascripts/app.js"></script> <link href="http://feeds.feedburner.com/github/lenciel" rel="alternate" title="@Lenciel" type="application/atom+xml"> <meta property="og:type" content="article"/> <meta property="og:url" content="http://lenciel.com/posts/71/"/> <meta property="og:description" content=" How To Define Viewport For Mobile 2012-08-09 22:39:00 ..."/> <meta property="og:site_name" content="http://lenciel.com"/> <meta property="article:author" content="http://lenciel.com"> <meta itemprop="description" content=" How To Define Viewport For Mobile 2012-08-09 22:39:00 ..."/> <script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?42345b94bf173b38bef61f873677adfa";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script> <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-175991-6', 'auto');
    ga('send', 'pageview');

</script> </head> <body class="collapse-sidebar sidebar-footer"> <header role="banner"><hgroup> <h1><a href="/">@Lenciel</a></h1> </hgroup> </header> <nav role="navigation"><ul class="subscription" data-subscription="rss"> <li><a href="http://feeds.feedburner.com/github/lenciel" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li> </ul> <ul class="main-navigation"> <li><a href="/"><i class="icon-home"></i>Home</a></li> <li><a href="/archives"><i class="icon-book-alt"></i>Archives</a><span class="divider"></span></li> <li><a href="/about"><i class="icon-user"></i>About</a><span class="divider"></span></li> </ul> </nav> <div id="main"> <div id="content"> <div class="blog-index"> <article> <header> <h1 class="entry-title"><a href="/2012/08/how-to-define-viewport-for-mobile/">How To Define Viewport For Mobile</a></h1> <p class="meta"> <time class='entry-date' datetime='2012-08-09 22:39:00 +0800'> <span class='date'>2012-08-09</span> <span class='time'>22:39:00</span> </time> </p> </header> <div class="entry-content"><a name="L.strong.........................CSS........strong."></a> <h4><strong>概念：设备像素和CSS像素</strong></h4> <p>首先要明白CSS像素和设备像素之间的区别。</p> <p>设备像素是定义了我们使用的设备的分辨率，一般来说可以通过<code>screen.width/height</code>来得到。</p> <p>如果我们在浏览器里面创建一个<code>width:128px</code>的元素，而我们的屏幕是1024px宽，那么在浏览器最大化的时候，浏览器的宽度应该是这个元素的八倍（大概八倍，暂时忽略那些tricky的bits）。</p> <p>如果用户使用滚轮放大或者缩小页面(Zooming)，那么这个关系就会变化。一般来说，现在的浏览器对Zomming的实现都是通过伸缩像素，也就是当用户Zoom到200%的时候，你的<code>128px</code>宽的元素宽度并不会变成<code>256px</code>，而是每个像素的宽度翻倍了：这个元素还是<code>128px</code>的宽度，但是占据了256个设备像素。</p> <p>也就是说，zoom到200%其实会让一个CSS像素从一个设备像素变成四个设备像素的大小（长宽各翻一倍，面积就变成了4倍）。</p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 原始(zoom 100%)&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 开始放大(zoom in)&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 开始缩小(zoom out)</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="csspixels_100" border="0" alt="csspixels_100" src="/downloads/images/2012_08/csspixels_100.gif" width="208" height="208"/>&#160; <img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="csspixels_in" border="0" alt="csspixels_in" src="/downloads/images/2012_08/csspixels_in.gif" width="208" height="208"/>&#160; <img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="csspixels_out" border="0" alt="csspixels_out" src="/downloads/images/2012_08/csspixels_out.gif" width="208" height="208"/></p> <p>从这里可以看出，我们在使用css像素值在css文件里面定义宽度时，不需要考虑设备像素，因为在zoom的时候css像素值是不变的。用户在缩放的时候，浏览器负责放大缩小那些元素，但是整个layout是不变的。</p> <a name="L.strong...............strong."></a> <h4><strong>屏幕大小</strong></h4> <p><code>screen.width</code>和<code>screen.height</code>可以获取用户屏幕的尺寸。获得的尺寸值的单位是设备像素，换句话说，它们是不变的(可以看成是显示器的硬件指标，而不随浏览器窗口缩放而变化)。</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="desktop_screen" border="0" alt="desktop_screen" src="/downloads/images/2012_08/desktop_screen.jpg" width="604" height="379"/></p> <p>一般来说，用户的屏幕大小对我们是无用的信息。很少有人使用它（除开统计站点访问信息时）。</p> <a name="L.strong...............strong."></a> <h4><strong>窗口大小</strong></h4> <a name=""></a> <h4></h4> <p>窗口大小表示了当前你的CSS layout可以占用的空间大小。可以通过<code>window.innerWidth</code>和<code>window.innerHeight</code>来获取它们。</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="desktop_inner" border="0" alt="desktop_inner" src="/downloads/images/2012_08/desktop_inner.jpg" width="604" height="379"/></p> <p>很显然，窗口大小的单位是CSS像素值。当用户用滚轮放大缩小自己的窗口大小的时候，<code>window.innerWidth/Height</code>会相应的变化，这样你就知道自己的layout有多大空间可用了。</p> <p>注意：Opera是一个例外，它的<code>window.innerWidth/Height</code>不会因为缩放变化，而是取的设备像素值。这点对于桌面操作系统上的应用很讨厌，但是就像后面会说到的，对于手机来说很关键。</p> <a name="L.strong.Scrolling.offset..strong."></a> <h4><strong>Scrolling offset</strong></h4> <p><code>window.pageXOffset/pageYOffset</code>代表了当前的document在横向和纵向上的偏移量。这样你就知道用户scroll了多少内容。</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="desktop_page" border="0" alt="desktop_page" src="/downloads/images/2012_08/desktop_page.jpg" width="604" height="519"/></p> <p>这些值也是CSS像素，理论上，当用户做缩放的时候，<code>window.pageXOffset/pageYOffset</code>也会变化。但是实际上，浏览器一般会在用户缩放的时候保证置顶的元素不变，所以在缩放的时候，一般来说这两个值基本是不变的。</p> <a name="L.strong..........Viewport..strong."></a> <h4><strong>概念：Viewport</strong></h4> <p><code>Viewport</code>的主要作用是限定<code>&lt;html&gt;</code>元素，也就是整个页面的最高级元素的大小。这样说比较含糊，我们来看一个详尽的例子：假设你有一个页面，侧栏的宽度是10%。在你缩放浏览器窗口大小的时候，这个侧边栏也会自动缩放。这是如果实现的？</p> <p>技术上讲，按照设置，侧边栏会自动占据自己的父元素（这里我们可以假设是<code>&lt;body&gt;</code>）宽度的10%。那么<code>&lt;body&gt;</code>的宽度呢？又会取它的父元素<code>&lt;html&gt;</code>的宽度的100%——因为理论上所有的HTML的block-level元素都会自动取父元素宽度的100%（有些例外情况，我们这里忽略它们）。</p> <p>那么<code>&lt;html&gt;</code>的宽度是怎么来的呢？所有的网页开发者都默认它就是浏览器的宽度。的确如此——在桌面浏览器上就是这样。实际上，就像我们已经提到过的，<html>的宽度是viewport限定的。在桌面上它就是整个浏览器窗口的宽度，而在手机上则要复杂得多。</p> <a name="L.strong..................strong."></a> <h4><strong>手机浏览器</strong></h4> <p>手机一个显而易见的特点就是屏幕小。如果我们原封不动的使用为桌面版浏览器开发的网站的文件，就会发现它们在手机浏览器上面目全非。但是大多数网站开发者是没有精力给手机用户专门维护另外一个网站的。因此手机浏览器制造商尽可能的通过技术手段让网站在手机上和在桌面浏览器里看起来“差不多”。</p> <a name="L.strong.......viewports..strong."></a> <h4><strong>两个viewports</strong></h4> <p>既然手机浏览器的viewport比较小，没法呈现所有css定义的元素，那么解决这个问题的办法就很明显了：扩大手机上的viewport。最终，手机浏览器通过<code>visual viewport</code>和<code>layout viewport</code>的合作来解决问题。</p> <p>George在Stack Overflow上<a href="http://stackoverflow.com/questions/6333927/difference-between-visual-viewport-and-layout-viewport" target="_blank">解释</a>说：</p> <p>layout viewport就像一个不改变大小和形状的大的图片。想象一下你透过一个小窗口去看这个大的图片，因为窗框的遮挡，你只能看到大图片的一部分。这部分就是visual viewport。你可以改变自己和这个窗口的位置（其实就是缩放），你也可以把窗口横放或者竖放，但是大图片本身（layout viewport）是不会改变的。</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="mobile_visualviewport" border="0" alt="mobile_visualviewport" src="/downloads/images/2012_08/mobile_visualviewport.jpg" width="404" height="549"/></p> <p>要注意，CSS layout，特别是用百分比定义的layout，都是用layout viewport来算的，一般来说比visual viewport要宽很多。</p> <p>因此，起始阶段<html>会占据整个layout viewport的宽度，你用CSS定义的元素的尺寸会比手机屏幕的尺寸要宽，这主要是要模拟网站在手机浏览器上的表现。</p> <p>那么layout viewport究竟有多宽？这个要看具体的手机浏览器。Safari的iPhone版为980px，Opera是850px，Android的Webkit是800px，而IE是974px。还有一些其他的浏览器除开特别的宽度之外有特别的行为，比如Symbian上的Webkit会尽量保持layout viewport和visual viewport相同。当layout viewport超过了850px的时候，两者才会变得不同。</p> <a name="L.strong.........strong."></a> <h4><strong>缩放</strong></h4> <p>很明显，visual和layout两种viewport都使用了CSS像素，但是layout viewport是不会因为缩放操作变化的，而visual viewport会。很多的移动设备上的浏览器，在默认情况下都是以完全zoom-out的尺寸来显示页面的——结合前面的对两种viewport的简介，你可以认为这种时候你是把头伸到窗口(visual viewport)外在看窗外那副大图片(layout viewport)，这种情况下两个viewport也是相等的（没有被窗框遮住的部分）。</p> <p>因此，layout viewport的宽和高等于在完全zoom-out的情况下screen上最大可显示的CSS像素值大小。因此在随后用户如果zoom-in了这个值是不会变化的。</p> <p>下面的图表示了这个变化：在刚开始打开一个页面的时候，处于完全zoom-out的状态，layout viewport的值等于visual viewport的值。随后，当用户zoom-in（放大页面）时，每个CSS像素变成数倍于设备像素，而整个layout viewport的值不变（这样才保证你为页面定义的CSS长宽有意义），于是layout viewport的物理范围扩大了不少。</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="mobile_viewportzoomedout" border="0" alt="mobile_viewportzoomedout" src="/downloads/images/2012_08/mobile_viewportzoomedout.jpg" width="240" height="418"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="mobile_layoutviewport" border="0" alt="mobile_layoutviewport" src="/downloads/images/2012_08/mobile_layoutviewport.jpg" width="304" height="413"/></p> <p>另外要注意的就是layout viewport的宽度是保持不变的。也就是说在默认情况下，竖屏转横屏的时候，虽然visual viewport变化了，但是浏览器会自动的zoom-in一些来使得layout viewport和visual viewport仍然相等。这种情况下，layout viewport的高度会变小，但是，对于web开发者而言，最重要的是宽度能保持不变。</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="mobile_viewportzoomedout" border="0" alt="mobile_viewportzoomedout" src="/downloads/images/2012_08/mobile_viewportzoomedout.jpg" width="240" height="418"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="mobile_layoutviewport_la" border="0" alt="mobile_layoutviewport_la" src="/downloads/images/2012_08/mobile_layoutviewport_la.jpg" width="362" height="298"/></p> <a name="L.strong.......layout.viewport..strong."></a> <h4><strong>测量layout viewport</strong></h4> <p><code>document.documentElement.clientWidth/Height</code>得到的是layout viewport的数值。并且，如前所述，横竖屏转换时，只会影响Height不会影响Width取值。</p> <blockquote><p><strong>document.documentElement.clientWidht/Height</strong>：</p> <ul> <li>Layout viewport</li> <li>使用CSS像素值为单位</li> <li>支持Opera、iPhone、Android、Symbian、Bolt、MicroB、Skyfire和Obigo</li> <li><p>有一些问题：</p></li> <li><p><div> Samsung的Webkit的viewport只有当显式指定了<meta viewport>的时候才有效，否则返回的是<html>元素的长宽 </div></p></li> <li><p><div> Firefox返回的是以设备像素值为单位的结果 </div></p></li> <li><p><div> IE返回1024&#215;768，正确的信息要通过<code>document.body.clientWidth/Height</code>获取 </div></p></li> </ul> </blockquote> <a name="L.strong.......visual.viewport..strong."></a> <h4><strong>测量visual viewport</strong></h4> <p><code>window.innerHeight/Width</code>返回的是visual viewport。很显然，当用户缩放的时候，这两个值会变化，因为有更多或者更少的CSS像素适配到屏幕可见的部分中。</p> <blockquote><p><strong>window.innerHeight/Width</strong>：</p> <ul> <li>visual viewport</li> <li>使用CSS像素值为单位</li> <li>支持iPhone、Symbian、BlackBerry</li> <li><p>有一些问题：</p></li> <li><p><div> Samsung的Webkit返回的是layout viewport的取值只有当显式指定了<meta viewport>的时候才有效，否则返回的是<html>元素的长宽 </div></p></li> <li><p><div> Firefox和Opera返回的是以设备像素值为单位的结果 </div></p></li> <li><p><div> IE不支持，正确的信息要通过<code>document.documentElement.offsetWidth/Height</code>获取 </div></p></li> <li><p><div> 其他的如Iris、Skyfire或者Obigo是有返回值到乱来的 </div></p></li> </ul> </blockquote> <a name="L.strong.....................strong."></a> <h4><strong>手机屏幕大小</strong></h4> <p>前面提到过，在桌面系统，screen.width/hieght返回屏幕的大小，但是和桌面系统一样，开发者都不关心这个值：因为物理上屏幕多大并不重要，我们更关心多少个CSS像素能弄进这个屏幕。</p> <a name="L.strong..html.........strong."></a> <h4><strong><html>元素</strong></h4> <p>通过<code>document.documentElement.offsetWidth/Height</code>可以获取<code>&lt;html&gt;</code>元素的CSS像素单位的尺寸。</p> <a name="L.strong...............strong."></a> <h4><strong>缩放比例</strong></h4> <p>当screen.width和window.innerWidth在你工作的平台都得到了正确实现的时候，两者相除就可以得到缩放的比例大小。</p> <a name="L.strong.Media.query..strong."></a> <h4><strong>Media query</strong></h4> <p>Media query的思想就是定义只在页面大于，等于或者是小于一定尺寸的时候，才被执行的CSS规则。比如：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span></span><span class="nt">div</span><span class="p">.</span><span class="nc">sidebar</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">width</span><span class="p">:</span> <span class="mi">300</span><span class="kt">px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">@</span><span class="k">media</span> <span class="nt">all</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="o">:</span> <span class="nt">400px</span><span class="o">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="o">//</span> <span class="nt">styles</span> <span class="nt">assigned</span> <span class="nt">when</span> <span class="nt">width</span> <span class="nt">is</span> <span class="nt">smaller</span> <span class="nt">than</span> <span class="nt">400px</span><span class="o">;</span>
</span><span class='line'>    <span class="nt">div</span><span class="p">.</span><span class="nc">sidebar</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure> <p>规则指定了当宽度小于400px的时候sidebar是100px，其余时候是300px。</p> <p>需要注意的是在定义media query的时候可以用两套长宽：css里的width/height表示的是documentElement. clientWidth/Height取值，也就是viewport，单位是css像素。css里的device-width/height表示的是screen.width/height，单位是物理像素。</p> <p>那么使用哪种值来定义media query甚至用不用它都是让人疑惑的问题。比如你用device-width的话 ，其实效果和使用<meta viewport>来定义是类似的。但是用width，仅仅是一个模糊的像素宽度，更加缺乏在各种设备上具体效果的准确预期。目前来看，用media query应该能比较正确的区分运行环境是桌面，手机还是平板，但是并不太能细致到是那款平板或者是什么手机。</p> <a name="L.strong.Meta.viewport..strong."></a> <h4><strong>Meta viewport</strong></h4> <p>终于可以来讨论<meta name="viewport">了。这个最早是Apple的一个扩展，但是现在已经被各种浏览器抄去了。它主要的作用是用来重定义layout viewport的大小。</p> <p>我们通过实例来解释：假设你开发了一个网站，没有写css，因此所有的元素没有width属性。打开页面的时候，它们会默认zoom-out到最大，看起来像这样：</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="mq_none" border="0" alt="mq_none" src="/downloads/images/2012_08/mq_none.jpg" width="258" height="455"/></p> <p>用户肯定会zoom-in，这时因为很多浏览器会保持每个元素的宽度仍然是100%的layout viewport，因此，很多文字就撑到visual viewport外面去了变得不可见了(Android原生的Webkit在这种情况下会自动调整text-containing元素的宽度来适配屏幕宽度）。</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="mq_none_zoomed" border="0" alt="mq_none_zoomed" src="/downloads/images/2012_08/mq_none_zoomed.jpg" width="336" height="406"/></p> <p>为了避免这种情况，你可能会加上html {width:320px}的css规则。这样<html>的宽度，也就是大多数未定义宽度的元素继承到的宽度，是320px。这样的规则可以解决用户zoom-in放大页面之后溢出的问题，但是当用户刚打开页面的时候，大概又会看的下图的效果(因为300个CSS像素值在完全zoom-out的情况下是很窄的）：</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="mq_html300" border="0" alt="mq_html300" src="/downloads/images/2012_08/mq_html300.jpg" width="254" height="445"/></p> <p>为了解决这种初始和用户缩放之后的不和谐，Apple定义了一个新的meta值。你可以用</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span></span><span class="o">&lt;</span><span class="nt">meta</span> <span class="nt">name</span><span class="o">=</span><span class="s2">&quot;viewport&quot;</span> <span class="nt">content</span><span class="o">=</span><span class="s2">&quot;width=320&quot;</span><span class="o">/&gt;</span>
</span></code></pre></td></tr></table></div></figure> <p>来确定<code>layout viewport</code>的宽度。这样在初始的时候，整个页面看起来仍然是非常正确的：</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="mq_yes" border="0" alt="mq_yes" src="/downloads/images/2012_08/mq_yes.jpg" width="254" height="448"/></p> <p>meta中定义的layout viewport宽度甚至可以是device-width，也就是以设备像素值标定的<code>screen.width</code>取值。但是这里有一个陷阱，就是有时候正式的<code>screen.width</code>的取值并不是真的有实际意义，因为像素值可能太高。比如Nexus One的屏幕宽度是480px，但是Google的工程师觉得用<code>device-width</code>来定义<code>viewport</code>就让<code>layout viewport</code>取值480px太宽了，于是它们让device-width的返回值打了个2/3的折扣，只有320px，和iphone一致。这样一来，<code>device-width</code>的取值又有点儿CSS像素值的意思了。这种resolution标称的像素值和<code>device-width</code>的返回值之间的关系被称为<code>CSS pixel density</code>。</p> <table border="3" cellspacing="0" cellpadding="2" width="772"> <tr> <td valign="top" width="158"> <strong>Device</strong> </td> <td valign="top" width="170"> <strong>resolution (px)</strong> </td> <td valign="top" width="442"> <strong>device-width/ device-height (px)</strong> </td> </tr> <tr> <td valign="top" width="158"> iPhone </td> <td valign="top" width="170"> 320 x 480 </td> <td valign="top" width="442"> 320 x 480, portrait/landscape mode </td> </tr> <tr> <td valign="top" width="158"> iPhone 4 </td> <td valign="top" width="170"> 640 x 960 </td> <td valign="top" width="442"> <p> 320 x 480, in both portrait and landscape mode <p> CSS pixel density&#160; = 2 </td> </tr> <tr> <td valign="top" width="158"> iPad 1 and 2 </td> <td valign="top" width="170"> 768 x 1024 </td> <td valign="top" width="442"> 768 x 1024, portrait/landscape mode </td> </tr> <tr> <td valign="top" width="158"> new iPad </td> <td valign="top" width="170"> 1536 x 2048 </td> <td valign="top" width="442"> <p> 768 x 1024, portrait/landscape mode <p> CSS pixel density = 2 </td> </tr> <tr> <td valign="top" width="158"> Samsung Galaxy S I and II </td> <td valign="top" width="170"> 480 x 800 </td> <td valign="top" width="442"> <p> 320 x 533, portrait mode <p> CSS pixel density = 1.5 </td> </tr> <tr> <td valign="top" width="158"> Samsung Galaxy S III </td> <td valign="top" width="170"> 720 x 1280 </td> <td valign="top" width="442"> 360? x 640?, portrait mode </td> </tr> <tr> <td valign="top" width="158"> HTC Evo 3D </td> <td valign="top" width="170"> 540 x 960 </td> <td valign="top" width="442"> <p> 360 x 640, portrait mode <p> CSS pixel density = 1.5 </td> </tr> <tr> <td valign="top" width="158"> Amazon Kindle Fire </td> <td valign="top" width="170"> 1024 x 600 </td> <td valign="top" width="442"> 1024 x 600, landscape mode </td> </tr> </table> </div> </article> <article> <header> <h1 class="entry-title"><a href="/2012/05/get-start-with-python/">Getting Start With Python</a></h1> <p class="meta"> <time class='entry-date' datetime='2012-05-28 22:15:00 +0800'> <span class='date'>2012-05-28</span> <span class='time'>22:15:00</span> </time> </p> </header> <div class="entry-content"><p>刚刚开始使用Python开发的新手，遇到的第一个瓶颈（常常）就是缺乏对整个Python生态系统的理解。大家总是在网上搜索完成这件事或者那件事的“标准做法”，就像我们使用其他编程语言的时候常常需要掌握的一样。</p> <p>在和几个朋友开始iDVR的开发的时候，我们在内部Wiki上维护过一个Python中常见问题列表。我们的目标是随着项目的不断进步，这个内部的wiki能够变成一个豪华的Q&amp;A索引，但是事实证明项目一忙起来就没有人去写Wiki了。</p> <p>最近陆续有朋友问一些Python相关的问题，想想其实要用三言两语说清楚并不容易，就决定在那份wiki的基础上自己写一个版本，给那些刚开始使用Python（从来没有编过程的读起来可能没啥帮助）的同学。</p> <a name="L.strong.Warning..strong."></a> <h4><strong>Warning</strong></h4> <p>Python编程是个大话题，不是这里讨论的内容。如果你没有太多编程经验，应该先去看一点儿Python的<a href="http://learnpythonthehardway.org/" target="_blank">入门书籍</a>。</p> <p>另外，这片文章是基于Windows（最好是Win7 32bit）操作系统。潮人请不要问为啥不是Mac或者Linux，因为本座主要用的机器（包括码这篇Blog）都是用Win7 32bit。不过除开环境搭建，这里提到的大部分概念对其他系统都是适用的。</p> <p>如果你有环境搭建上的问题，最靠谱的提问的地方不是CSDN或者百度知道，是<a href="http://stackoverflow.com/" target="_blank">Stack Overflow</a>。</p> <a name="L............"></a> <h2>版本选择</h2> <p>本座在某软件公司面试的时候别人看到简历上有Python就问，Python3用过吗？本座老实回答没有，结果面试官就停下他正在笔记本上google的微操，在脸上流露出一丝嘲讽…</p> <p>不过，除了Python这门语言本身的开发者，大多数像本座这种使用Python的人，都没有紧跟Python3的步伐。Python3（或者叫Py3K）是一个大多数我熟悉的包，框架和工具都还没有完备支持的版本（在未来的数年本座也看不到希望）。如果不是想研究Python3的新特性或者具体实现，个人觉得初学的开发者使用2.7.x是最安全的版本（本座还在用进M公司就装好的2.6版本）。</p> <p>如果你比较熟悉Python但是不确定该不该升级到Python3，不妨先去观赏一下<a href="http://python3wos.appspot.com/">Python 3 Wall of Shame</a> (墙外，你们懂的)。</p> <a name="VM......"></a> <h2>VM选择</h2> <p>Python是<a href="http://zh.wikipedia.org/zh-hk/%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80" target="_blank">脚本语言</a>，因此需要VM。CPython是最主流的选择，也被当成其他VM实现时的参考。其他常见的还有用Python实现的<a href="http://pypy.org/">PyPy</a>，用Java实现的<a href="http://www.jython.org/">Jython</a> 以及用Microsoft .Net CLR实现的<a href="http://ironpython.net/">IronPython</a>。如果你不是非常非常确定你自己要选用别的，就安装CPython吧。</p> <p>换句话说，前面这堆关于VM和版本选择的建议在你看来不知所云，你需要的就是<a href="http://www.python.org/getit/" target="_blank">CPython 2.7.x版本</a>。</p> <a name="Python......"></a> <h2>Python安装</h2> <p>下载之后的.exe安装文件安装的时候有一个地方需要注意：如果你是在Vista/Win7这样的C盘权限控制异常严格的操作系统，最好用右键“Run as administrator”。这点也适用于你下载到的被其他人编译成exe发布的Python package。嗯，什么是package？</p> <a name="L......Package"></a> <h2>理解Package</h2> <p>Python没有一个内置的package管理体系。实际上Python下面一个package是什么也是一个很“不具体”的概念。就像前面提到的，Python下面的代码是以module为单位存在的。每个module既可以是一个只有一个函数的文件，也可以是一个包含了一个或者多个子module的目录。而module和package之间的区别是非常模糊的，每个module都可以被认为是一个package。</p> <p>和所有的编程环境一样，在Python下面有一些函数和类是全局可见的（<code>str</code>，<code>len</code>，<code>Exception</code>等等），而另外一些需要通过<code>import</code>语句导入，比如：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span></span><span class="o">&gt;&gt;&gt;</span><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span><span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span><span class="p">,</span> <span class="n">dirname</span>
</span></code></pre></td></tr></table></div></figure> <p>这里<code>import</code>被调用的时候，Python是从哪里把这些module导入的呢？其实，在你安装Python的时候，module的导入路径已经被自动设置过了。这个过程的具体实现是跟你运行的平台相关的，你可以通过<code>sys.path</code>来查看被设置的路径究竟是什么。比如本座的是：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span><span class="o">[</span><span class="s1">&#39;&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\demjson-1.4-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\anyjson-0.2.5-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\pmw-1.3.2-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\paramiko-1.7.6-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\treewidgets-1.0a1-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\mechanize-0.2.3-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\pylint-0.22.0-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\logilab_astng-0.21.0-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\logilab_common-0.53.0-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\unittest2-0.5.1-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\virtualenv-1.5.1-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\django_staticfiles-0.3.2-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\django_attachments-0.3dev-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\django_ajax_validation-0.1.4-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\django_email_confirmation-0.2.dev4-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\distribute-0.6.10-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\django_timezones-0.2.dev1-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\django-1.3-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\ \Python26\\lib\\site-packages\\rbtools-0.3.2-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\django_debug_toolbar-0.8.4-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\suds-0.4-py2.6.egg&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Windows\\system32\\python26.zip&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\DLLs&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\plat-win&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\lib-tk&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\PIL&#39;</span>,
</span><span class='line'><span class="s1">&#39;C:\\Python26\\lib\\site-packages\\wx-2.8-msw-unicode&#39;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure> <p>Python在导入的module的时候，是按照这个列表“自顶向下，见好就收”的方式运作的。也就是说如果你正好机器上有两个路径下面安装了同样名称的module，先被搜索到的那个就会被导入。有的时候，你确信自己受到了这种机制的干扰，也可以通过下面的办法来hack回来：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span></span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(,</span> <span class="s1">&#39;path</span><span class="se">\\</span><span class="s1">to</span><span class="se">\\</span><span class="s1">your</span><span class="se">\\</span><span class="s1">packages&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure> <p>进行一段时间的Python开发过后你总是会有很多的包，于是这个办法你会觉得非常的方便。但是，请结合后面的内容默默记住，不到万不得已，不要这样hack。</p> <a name="L.strong.The.PYTHONPATH..strong."></a> <h5><strong>The PYTHONPATH</strong></h5> <p><code>PYTHONPATH</code>是一个环境变量（可以win+break到高级设置里面去设置），可以简单的理解它就是Windows下面的<code>PATH</code>变量，不过只是对Python可见而已。在很多Python的教程里面，会说所有你想要让Python搜索module的路径，都应该加到这个变量对应的列表里面。</p> <p>其实前面提到过，在Python安装的时候搜索路径已经被自动设置过一次。所以<code>PYTHONPATH</code>这个变量并不是必须加的。而且，作为开发环境满坑满谷的程序员，我们都喜欢把Path里面搞得干干净净的（比如本座干活都习惯在bat里面先设置相关的路径再起相应的Eclipse）。这种一启动就load一堆的办法，自己喜欢也可以用，但是更推荐后面会说的<code>virtualenv</code>。</p> <a name="L.strong..........package..strong."></a> <h5><strong>第三方package</strong></h5> <p>首先，入门之后要开始正经干活，你总是需要安装一些第三方的Package。安装的办法有：</p> <ol> <li>下载别人编译好的Windows的版本exe</li> <li>使用<code>pip</code>或者<code>easy_install</code></li> <li>自己从代码安装</li> </ol> <p>三种办法干的事情都是类似的：下载package的依赖包，编译（需要的话）和拷贝目标文件到一个默认的第三方Package路径。那么，哪里去找安装需要的文件呢？一般来说：</p> <ol> <li>Google</li> <li><a href="http://pypi.python.org/pypi">Python Package Index(or PyPI)</a></li> <li>各种开源的代码库(<a href="https://launchpad.net/">Launchpad</a>/<a href="http://github.com/">GitHub</a>/<a href="https://bitbucket.org/">BitBucket</a>）</li> </ol> <a name="L.strong.........................exe..strong."></a> <h5><strong>安装别人编译好的exe</strong></h5> <p>注意下载的时候看清别人编译是在32还是64bit的Windows，Python的版本和你用的一致不一致。运行exe的时候注意右键Run as Administrator。就这么简单。</p> <a name="L.strong.......pip..strong."></a> <h5><strong>使用pip</strong></h5> <p><code>easy_install</code>已经慢慢失宠了，主要介绍一下它的替代品：<code>pip</code>。</p> <p><code>pip</code>是用来安装和管理Python Package的工具。它不是随Python默认安装的，因此需要额外安装。安装完毕之后我们就可以在命令行里面调用它来管理package了。比如你要安装<code>pygame</code>这个package，只需要：</p> <div class="wp_syntax"> <div class="code"> <pre class="python" style="font-family:monospace;">pip install pygame</pre> </div> </div> <p>而如果你想删除它的话，则运行：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span>pip uninstall pygame
</span></code></pre></td></tr></table></div></figure> <p><code>pip</code>默认会按照你指定的名字，搜索和安装最新的stable版本的包。但我们常常需要安装某个特定版本的包，这个时候需要你在命令行里面指定：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span>pip install <span class="nv">pygame</span><span class="o">==</span>version_number
</span></code></pre></td></tr></table></div></figure> <p>如果你安装的版本不对，可以通过<code>upgrade</code>命令升级/降级到指定版本：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span>pip install <span class="nv">pygame</span><span class="o">==</span>version_number –upgrade
</span></code></pre></td></tr></table></div></figure> <p>由于Python高度依赖开源团体，很多最新的package都没有在PyPI上面，我们常常需要从代码库直接安装package。在<code>pip</code>下面可以直接</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span>$ pip install git+http://somedomain.com/path/to/git-repo#egg<span class="o">=</span>packagename
</span><span class='line'>$ pip install hg+http://somedomain.com/path/to/hg-repo#egg<span class="o">=</span>packagename
</span><span class='line'>$ pip install svn+http://somedomain.com/path/to/svn-repo#egg<span class="o">=</span>packagename
</span></code></pre></td></tr></table></div></figure> <p>当然，前提是git/hg/svn这些工具你都安装好了并且在命令行里面能够执行。</p> <p>上面这些<code>egg</code>是什么蛋呢？你可以认为它们就是Package源代码和一些metadata打成的压缩包。<code>pip</code>会读取<code>egg</code>里面的<code>setup.py</code>文件，然后安装<code>egg</code>到你的文件系统。</p> <a name="L.strong....Python..............strong."></a> <h5><strong>从Python源码安装</strong></h5> <p>从源代码安装虽然是最复杂的，但是也没那么复杂。把你下载的源代码解压之后，找到<code>setup.py</code>所在的路径，然后运行下面的命令：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span>python setup.py install
</span></code></pre></td></tr></table></div></figure> <p>也许你觉得这样也挺容易的，为啥要去用<code>pip</code>？因为：</p> <ul> <li>省去你上网找源代码，解压，安装这些动作</li> <li>更重要的是，<code>pip</code>不但装，而且管。你可以升级和降级一个Package。</li> </ul> <a name="L.strong......................package..strong."></a> <h5><strong>安装需要编译的package</strong></h5> <p>这种一般是因为Package里面有c/cpp的代码。如果你能找到别人编译好的exe文件或者用<code>pip</code>，最好不要自己折腾。只有非常非常罕见的情况下你需要自己编译，过程中一般来说都会需要用<code>cygwin</code>之类的东西，在前面几次你可以多看看每个Package的<code>readme</code>关于编译的说明。</p> <a name="L............"></a> <h2>开发环境</h2> <a name="L.strong.virtualenv..strong."></a> <h5><strong>virtualenv</strong></h5> <p><code>virtualenv</code>无疑是当前Python开发者心中“必知必会”类的工具了。<code>virtualenv</code>主要就是提供一个“独立的”Python开发环境。为什么需要“独立”的开发环境？在不知道<code>virtualenv</code>之前Python包满坑满谷的本座自然是有很多槽可以吐，不过最好的答案是<code>virtualenv</code>的文档里面说的：</p> <blockquote><p>The basic problem being addressed is one of dependencies and versions, and indirectly permissions. Imagine you have an application that needs version 1 of LibFoo, but another application requires version 2. How can you use both these applications? If you install everything into /usr/lib/python2.7/site-packages (or whatever your platform’s standard location is), it’s easy to end up in a situation where you unintentionally upgrade an application that shouldn’t be upgraded.</p></blockquote> <p>简单来说，就是每个工程使用自己独立的<code>virtualenv</code>进行开发，所有该工程需要依赖的Package都安装在这个<code>virutalenv</code>里面。<code>virutalenv</code>的安装同样是使用<code>pip</code>：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span>$ pip install virtualenv
</span></code></pre></td></tr></table></div></figure> <p>然后就可以建立属于自己项目的开发环境：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span>D:<span class="se">\L</span>enciel<span class="se">\T</span>emp mkdir my_project_env
</span><span class='line'>
</span><span class='line'>D:<span class="se">\L</span>enciel<span class="se">\T</span>emp<span class="se">\v</span>irtualenv --distribute my_project_env
</span><span class='line'>
</span><span class='line'>  New python executable in my_project_env<span class="se">\S</span>cripts<span class="se">\p</span>ython.exe
</span><span class='line'>  Installing distribute.................done.
</span></code></pre></td></tr></table></div></figure> <p>建立的目录下面会自动的安装好<code>pip</code>等工具：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span>-my_project_env
</span><span class='line'>  <span class="p">|</span>-- Scripts <span class="c1"># -- Python解释器的拷贝/pip脚本/activiate脚本/deactivate脚本等</span>
</span><span class='line'>  <span class="p">|</span>-- Lib     <span class="c1"># -- 所有库（包括激活后使用pip安装的库都会放在这里</span>
</span></code></pre></td></tr></table></div></figure> <p>在命令行执行activate脚本就可以激活你新建的环境。环境被激活后，主要通过下面两个功能保持独立完整性：</p> <ol> <li>当你在被激活的环境里面使用<code>pip</code>安装一个Package的时候，它只会被安装在这个工作目录下面</li> <li>当你<code>import</code>的时候，会先从工作目录下面去搜索，然后才会搜索系统目录下的</li> </ol> <p>需要注意的是，在系统目录下面安装的包，对所有的<code>virtualenv</code>建立的环境都是可见的。如果你不想在你建立的<code>virtualenv</code>里面看到这些包，可以使用<code>--no-site-packages</code>参数建立开发环境：</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span></span>$ virtualenv my_project_venv --no-site-packages
</span></code></pre></td></tr></table></div></figure> <a name="L..............."></a> <h2>其他的工具</h2> <a name="L.strong............strong."></a> <h5><strong>编辑器</strong></h5> <p>在不同的项目里面本座用过Vim/Sublime text 2/Eclipse+PyDev/PyCharm。现在Vim和PyCharm用得比较多一点，PyDev一直有一些诡异的问题。比如那个“<a href="https://www.google.com.hk/search?num=30&hl=en&newwindow=1&c2coff=1&safe=strict&site=&source=hp&q=Unresolved+import+pydev&btnK=Google+Search&qscrl=1" target="_blank">Unresolved import</a>”从一开始到现在都好像没有被真正解决过。</p> <a name="L.strong...............strong."></a> <h5><strong>编码规范</strong></h5> <p><a href="http://www.python.org/dev/peps/pep-0008/">PEP 0008</a>推荐了非常完整的一套编码规范，目的就是让全世界编写Python脚本的同学们用相同的方式去对齐代码，命名变量、类和函数。每个严肃的Pythoner都应该认真的学习和理解这些规范，并且贯彻执行。</p> <a name="L.strong.Python...........strong."></a> <h5><strong>Python标准库</strong></h5> <p>Python的标准库提供了相当完备的功能。就像Java的工程师需要熟悉系统自带的API文档一样，了解标准库的用法是非常有好处的。另外，这些标准库都是很好的范例，特别是在支持跨平台使用这方面。</p> <p>官方文档在<a href="http://docs.python.org/library/" target="_blank">这里</a>。</p> <a name="L......"></a> <h2>嗯哼</h2> <p>前面列了不少东西，只是希望给新手一个上路指引。Python下面有用的工具，有趣的包很多很多。随着你学习和应用这门语言，不断深入它，你会自己慢慢发觉那些你自己最需要/愿意熟悉的部分。</p> <p>Python的另外一大财富就是它的开源社区，条件成熟的时候，你也应该参与到这样的开发活动里面去。</p> <p>最后是每个Pythoner都津津乐道的Zen Of Python送给刚开始学习的朋友。</p> <figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span></span><span class="o">&gt;&gt;&gt;</span><span class="kn">import</span> <span class="nn">this</span>
</span><span class='line'><span class="n">The</span> <span class="n">Zen</span> <span class="n">of</span> <span class="n">Python</span><span class="p">,</span> <span class="n">by</span> <span class="n">Tim</span> <span class="n">Peters</span>
</span><span class='line'>
</span><span class='line'><span class="n">Beautiful</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">ugly</span><span class="o">.</span>
</span><span class='line'><span class="n">Explicit</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">implicit</span><span class="o">.</span>
</span><span class='line'><span class="n">Simple</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="nb">complex</span><span class="o">.</span>
</span><span class='line'><span class="n">Complex</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">complicated</span><span class="o">.</span>
</span><span class='line'><span class="n">Flat</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">nested</span><span class="o">.</span>
</span><span class='line'><span class="n">Sparse</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">dense</span><span class="o">.</span>
</span><span class='line'><span class="n">Readability</span> <span class="n">counts</span><span class="o">.</span>
</span><span class='line'><span class="n">Special</span> <span class="n">cases</span> <span class="n">aren</span><span class="s1">&#39;t special enough to break the rules.</span>
</span><span class='line'><span class="n">Although</span> <span class="n">practicality</span> <span class="n">beats</span> <span class="n">purity</span><span class="o">.</span>
</span><span class='line'><span class="n">Errors</span> <span class="n">should</span> <span class="n">never</span> <span class="k">pass</span> <span class="n">silently</span><span class="o">.</span>
</span><span class='line'><span class="n">Unless</span> <span class="n">explicitly</span> <span class="n">silenced</span><span class="o">.</span>
</span><span class='line'><span class="n">In</span> <span class="n">the</span> <span class="n">face</span> <span class="n">of</span> <span class="n">ambiguity</span><span class="p">,</span> <span class="n">refuse</span> <span class="n">the</span> <span class="n">temptation</span> <span class="n">to</span> <span class="n">guess</span><span class="o">.</span>
</span><span class='line'><span class="n">There</span> <span class="n">should</span> <span class="n">be</span> <span class="n">one</span><span class="o">--</span> <span class="ow">and</span> <span class="n">preferably</span> <span class="n">only</span> <span class="n">one</span> <span class="o">--</span><span class="n">obvious</span> <span class="n">way</span> <span class="n">to</span> <span class="n">do</span> <span class="n">it</span><span class="o">.</span>
</span><span class='line'><span class="n">Although</span> <span class="n">that</span> <span class="n">way</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">obvious</span> <span class="n">at</span> <span class="n">first</span> <span class="n">unless</span> <span class="n">you</span><span class="s1">&#39;re Dutch.</span>
</span><span class='line'><span class="n">Now</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">never</span><span class="o">.</span>
</span><span class='line'><span class="n">Although</span> <span class="n">never</span> <span class="ow">is</span> <span class="n">often</span> <span class="n">better</span> <span class="n">than</span> <span class="o">*</span><span class="n">right</span><span class="o">*</span> <span class="n">now</span><span class="o">.</span>
</span><span class='line'><span class="n">If</span> <span class="n">the</span> <span class="n">implementation</span> <span class="ow">is</span> <span class="n">hard</span> <span class="n">to</span> <span class="n">explain</span><span class="p">,</span> <span class="n">it</span><span class="s1">&#39;s a bad idea.</span>
</span><span class='line'><span class="n">If</span> <span class="n">the</span> <span class="n">implementation</span> <span class="ow">is</span> <span class="n">easy</span> <span class="n">to</span> <span class="n">explain</span><span class="p">,</span> <span class="n">it</span> <span class="n">may</span> <span class="n">be</span> <span class="n">a</span> <span class="n">good</span> <span class="n">idea</span><span class="o">.</span>
</span><span class='line'><span class="n">Namespaces</span> <span class="n">are</span> <span class="n">one</span> <span class="n">honking</span> <span class="n">great</span> <span class="n">idea</span> <span class="o">--</span> <span class="n">let</span><span class="s1">&#39;s do more of those!</span>
</span></code></pre></td></tr></table></div></figure> <p>Happy Pythoning…!!</p> </div> </article> <div class="pagination"> <a class="prev" href="/posts/72">&larr; Older</a> <a href="/archives">Archives</a> <a class="next" href="/posts/70">Newer &rarr;</a> </div> </div> </div> </div> <footer role="contentinfo"><p> Blog theme: <a href="https://github.com/lenciel/jekyll-lenciel-theme">jekyll-lenciel-theme</a> <span class="theme-version">Copyright &copy; 2004-2017 by <a href="mailto:lenciel@gmail.com">Lenciel</a></span> </p> </footer> <script type="text/javascript">
  var stylesheet = document.createElement('link');
  stylesheet.href = '/assets/stylesheets/app.css';
  stylesheet.rel = 'stylesheet';
  stylesheet.type = 'text/css';
  document.getElementsByTagName('head')[0].appendChild(stylesheet);
</script> </body> </html>